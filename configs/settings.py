# configs/settings.py
import os
from dotenv import load_dotenv

# Загружаем переменные окружения из файла .env
# Это позволяет хранить чувствительные данные, такие как API ключи, вне кода.
# Создайте файл .env в корневой директории проекта.
load_dotenv()

# --- НАСТРОЙКИ API ---
# Ваш API ключ от Twelve Data. Берется из переменной окружения TWELVE_DATA_API_KEY.
# Если переменная не найдена, используется значение по умолчанию (замените его или установите переменную).
API_KEY_TWELVE_DATA = os.getenv("TWELVE_DATA_API_KEY", "YOUR_TWELVE_DATA_API_KEY_HERE")
BASE_URL_TWELVE_DATA = "https://api.twelvedata.com"

# --- ОБЩИЕ НАСТРОЙКИ БОТА ---
DEFAULT_SYMBOL = "EUR/USD"  # Валютная пара для анализа по умолчанию

# --- НАСТРОЙКИ СТРАТЕГИИ 1H (Контекст) ---
CONTEXT_TIMEFRAME = "1h"    # Таймфрейм для анализа контекста
# Количество свечей для анализа контекста.
# Должно быть достаточно для выявления нескольких свингов (например, 2.5-3 дня).
# Увеличим для захвата данных за предыдущие дни для NY сессии.
CONTEXT_OUTPUT_SIZE = 120 # Примерно 5 дней данных для 1H
# Параметр 'n' для функции find_swing_points.
# n=1: 3-свечной паттерн (менее надежный).
# n=2: 5-свечной паттерн (более надежный).
SWING_POINT_N = 2

# --- НАСТРОЙКИ ДЛЯ ГРАФИКОВ ---
# Директория для сохранения графиков. Будет создана относительно корня проекта.
CHARTS_DIRECTORY_NAME = "charts"

# --- НАСТРОЙКИ СЕССИОННЫХ ФРАКТАЛОВ ---
# Время указано в UTC. Убедитесь, что ваш источник данных (Twelve Data) предоставляет время в UTC
# или соответствующим образом скорректируйте время.
# Азиатская сессия (примерные рамки, можно уточнить)
ASIAN_SESSION_START_HOUR_UTC = 0  # 00:00 UTC
ASIAN_SESSION_START_MINUTE = 0
ASIAN_SESSION_END_HOUR_UTC = 9    # 09:00 UTC
ASIAN_SESSION_END_MINUTE = 0

# Нью-Йоркская сессия (примерные рамки, можно уточнить)
NY_SESSION_START_HOUR_UTC = 13  # 13:00 UTC (8 AM EST, без учета перехода на летнее время)
NY_SESSION_START_MINUTE = 0
NY_SESSION_END_HOUR_UTC = 22  # 22:00 UTC (5 PM EST, без учета перехода на летнее время)
NY_SESSION_END_MINUTE = 0

# Количество предыдущих Нью-Йоркских сессий для анализа
NY_SESSIONS_TO_CHECK_PREVIOUS_DAYS = 1 # Анализируем НЙ сессию вчерашнего дня

# Порог ценовой близости для фракталов (в пунктах или долях цены)
# Для EUR/USD 1 пункт = 0.0001. 10 пунктов = 0.0010
FRACTAL_PROXIMITY_THRESHOLD_PIPS = 15 # Например, 15 пунктов
# Коэффициент для перевода пипсов в абсолютное значение для текущего инструмента.
# Для большинства XXX/YYY пар, где YYY не JPY, 1 пипс = 0.0001.
# Для JPY пар, 1 пипс = 0.01.
# Это значение может потребовать более динамического определения в зависимости от инструмента.
# Пока что используем стандартное значение.
PIP_VALUE_DEFAULT = 0.0001

# --- ПРОВЕРКА API КЛЮЧА ---
if API_KEY_TWELVE_DATA == "YOUR_TWELVE_DATA_API_KEY_HERE":
    print("ПРЕДУПРЕЖДЕНИЕ: API ключ для Twelve Data не установлен или используется значение по умолчанию.")
    print("Пожалуйста, установите переменную окружения TWELVE_DATA_API_KEY в файле .env")

